
SHELL=@SHELL@

prefix=@prefix@
sysconfdir=@sysconfdir@
top_srcdir=@top_srcdir@

INSTALL=@INSTALL@

VPATH=@srcdir@

BINDIR=${top_srcdir}/bin
TARGET=mlbmake

include ${top_srcdir}/Makefiledefault

all: ${BINDIR}/${TARGET}

$(BINDIR)/$(TARGET): $(TARGET)
	${INSTALL} $(TARGET) $(BINDIR)/$(TARGET)

.PHONY: Confoptions.sml
Confoptions.sml: Confoptions.sml.in
	cp -f Confoptions.sml.in Confoptions.sml
	echo "    val etcdir = $(sysconfdir)" >> Confoptions.sml
	echo "  end" >> Confoptions.sml

$(TARGET): sources.mlb Makefile *.sml Confoptions.sml
	$(MLCOMP) -output $(TARGET) sources.mlb

clean:
	rm -rf MLB *~ $(TARGET)
